<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: MobCreator
  
    &mdash; Documentation by YARD 0.8.6.2
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (M)</a> &raquo;
    
    
    <span class="title">MobCreator</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: MobCreator
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">MobCreator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/models/mob_creator.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Factory class of Mob.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign_new_mobs-class_method" title="assign_new_mobs (class method)">+ (Object) <strong>assign_new_mobs</strong>(num, user_id = nil, specie_id = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Assign new (first genartion) mobs to user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mate_mob-class_method" title="mate_mob (class method)">+ (Object) <strong>mate_mob</strong>(father_id, mother_id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create new mob by mating.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#random_mate_mob-class_method" title="random_mate_mob (class method)">+ (Object) <strong>random_mate_mob</strong>(num, user_id = nil, specie_id = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create new mob by mating.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#random_split_mob-class_method" title="random_split_mob (class method)">+ (Object) <strong>random_split_mob</strong>(num, user_id = nil, specie_id = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create new mob by splitting.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#seed_mobs-class_method" title="seed_mobs (class method)">+ (Object) <strong>seed_mobs</strong>(specie_id, num) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create seed mobs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#specie_able_to_mate%3F-class_method" title="specie_able_to_mate? (class method)">+ (Boolean) <strong>specie_able_to_mate?</strong>(user_id, specie_id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Check the specie whether it is able to mate or not.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#split_mob-class_method" title="split_mob (class method)">+ (Object) <strong>split_mob</strong>(mother_id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create new mob by splitting.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="assign_new_mobs-class_method">
  
    + (<tt>Object</tt>) <strong>assign_new_mobs</strong>(num, user_id = nil, specie_id = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Assign new (first genartion) mobs to user. The first genartion mob is a mob
which is created from seed mobs.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>num</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Number of mobs to be created.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>HouddUser.id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>specie_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Specie.id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/mob_creator.rb', line 67</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assign_new_mobs'>assign_new_mobs</span><span class='lparen'>(</span><span class='id identifier rubyid_num'>num</span><span class='comma'>,</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>

  <span class='comment'># Validation
</span>  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_num'>num</span> <span class='op'>&lt;</span> <span class='int'>1</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='const'>Specie</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_num'>num</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>

    <span class='id identifier rubyid_mob'>mob</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='id identifier rubyid_specie_id'>specie_id</span>
    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_houdd_user_id'>houdd_user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_user_id'>user_id</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_asexual_flg'>asexual_flg</span>
      <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother_id'>mother_id</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_find_all_by_specie_id_and_generation'>find_all_by_specie_id_and_generation</span><span class='lparen'>(</span><span class='id identifier rubyid_specie_id'>specie_id</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_father_id'>father_id</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_find_all_by_specie_id_and_generation_and_gender_sym'>find_all_by_specie_id_and_generation_and_gender_sym</span><span class='lparen'>(</span><span class='id identifier rubyid_specie_id'>specie_id</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='const'>Params</span><span class='op'>::</span><span class='const'>GENDER_MALE</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother_id'>mother_id</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_find_all_by_specie_id_and_generation_and_gender_sym'>find_all_by_specie_id_and_generation_and_gender_sym</span><span class='lparen'>(</span><span class='id identifier rubyid_specie_id'>specie_id</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='const'>Params</span><span class='op'>::</span><span class='const'>GENDER_FEMALE</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='kw'>end</span>

    <span class='comment'># Create status modifying gene.
</span>    <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='const'>Gene</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_gene_a'>gene_a</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_gene_b'>gene_b</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_asexual_flg'>asexual_flg</span>
      <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_gene_a'>gene_a</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>
      <span class='id identifier rubyid_gene_b'>gene_b</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_father'>father</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_gene_a'>gene_a</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id identifier rubyid_gene_b'>gene_b</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span>
        <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_a'>gene_a</span>
      <span class='kw'>elsif</span> <span class='kw'>not</span> <span class='id identifier rubyid_gene_a'>gene_a</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span> <span class='kw'>and</span> <span class='id identifier rubyid_gene_b'>gene_b</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span>
        <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_b'>gene_b</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_a'>gene_a</span> <span class='op'>+</span> <span class='id identifier rubyid_gene_b'>gene_b</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># Effect of miss print
</span>    <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_shake_gene'>shake_gene</span><span class='lparen'>(</span><span class='id identifier rubyid_mod_gene'>mod_gene</span><span class='comma'>,</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_mutation_rate'>mutation_rate</span><span class='rparen'>)</span>

    <span class='comment'># Create starting status.
</span>    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_squad_id'>squad_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span> <span class='op'>=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_mob'>mob</span> <span class='op'>=</span> <span class='id identifier rubyid_new_mob'>new_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_mob'>mob</span><span class='comma'>,</span> <span class='id identifier rubyid_mod_gene'>mod_gene</span><span class='rparen'>)</span>

    <span class='comment'># Set DNA.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_asexual_flg'>asexual_flg</span>
      <span class='id identifier rubyid_dna'>dna</span> <span class='op'>=</span> <span class='const'>Dna</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
      <span class='id identifier rubyid_dna'>dna</span><span class='period'>.</span><span class='id identifier rubyid_mob_id'>mob_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_dna'>dna</span><span class='period'>.</span><span class='id identifier rubyid_gene_id'>gene_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mod_gene'>mod_gene</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_dna'>dna</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
      <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dna'>dna</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_dna_a'>dna_a</span> <span class='op'>=</span> <span class='const'>Dna</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
      <span class='id identifier rubyid_dna_a'>dna_a</span><span class='period'>.</span><span class='id identifier rubyid_mob_id'>mob_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_dna_a'>dna_a</span><span class='period'>.</span><span class='id identifier rubyid_gene_id'>gene_id</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_a'>gene_a</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_dna_a'>dna_a</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
      <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dna_a'>dna_a</span>

      <span class='id identifier rubyid_dna_b'>dna_b</span> <span class='op'>=</span> <span class='const'>Dna</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
      <span class='id identifier rubyid_dna_b'>dna_b</span><span class='period'>.</span><span class='id identifier rubyid_mob_id'>mob_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_dna_b'>dna_b</span><span class='period'>.</span><span class='id identifier rubyid_gene_id'>gene_id</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_b'>gene_b</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_dna_b'>dna_b</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
      <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dna_b'>dna_b</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mate_mob-class_method">
  
    + (<tt>Object</tt>) <strong>mate_mob</strong>(father_id, mother_id) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This method is only for mobs of sexual reproduction.</p>
</div>
  </div>


<p>Create new mob by mating.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>father_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Mob.id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>mother_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Mob.id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/mob_creator.rb', line 226</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_mate_mob'>mate_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_father_id'>father_id</span><span class='comma'>,</span> <span class='id identifier rubyid_mother_id'>mother_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mob'>mob</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_father_id'>father_id</span> <span class='op'>=</span> <span class='id identifier rubyid_father_id'>father_id</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother_id'>mother_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mother_id'>mother_id</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_houdd_user_id'>houdd_user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_houdd_user_id'>houdd_user_id</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span> <span class='op'>+</span> <span class='int'>1</span>

  <span class='id identifier rubyid_gene_a'>gene_a</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>
  <span class='id identifier rubyid_gene_b'>gene_b</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_father'>father</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_gene_a'>gene_a</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id identifier rubyid_gene_b'>gene_b</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span>
    <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_a'>gene_a</span>
  <span class='kw'>elsif</span> <span class='kw'>not</span> <span class='id identifier rubyid_gene_a'>gene_a</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span> <span class='kw'>and</span> <span class='id identifier rubyid_gene_b'>gene_b</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span>
    <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_b'>gene_b</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_a'>gene_a</span> <span class='op'>+</span> <span class='id identifier rubyid_gene_b'>gene_b</span>
  <span class='kw'>end</span>

  <span class='comment'># Effect of miss print
</span>  <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_shake_gene'>shake_gene</span><span class='lparen'>(</span><span class='id identifier rubyid_mod_gene'>mod_gene</span><span class='comma'>,</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_mutation_rate'>mutation_rate</span><span class='rparen'>)</span>

  <span class='comment'># Create starting status.
</span>  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_squad_id'>squad_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_mob'>mob</span> <span class='op'>=</span> <span class='id identifier rubyid_new_mob'>new_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_mob'>mob</span><span class='comma'>,</span> <span class='id identifier rubyid_mod_gene'>mod_gene</span><span class='rparen'>)</span>

  <span class='comment'># Set DNA.
</span>  <span class='id identifier rubyid_dna_a'>dna_a</span> <span class='op'>=</span> <span class='const'>Dna</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_dna_a'>dna_a</span><span class='period'>.</span><span class='id identifier rubyid_mob_id'>mob_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_dna_a'>dna_a</span><span class='period'>.</span><span class='id identifier rubyid_gene_id'>gene_id</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_a'>gene_a</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_dna_a'>dna_a</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dna_a'>dna_a</span>

  <span class='id identifier rubyid_dna_b'>dna_b</span> <span class='op'>=</span> <span class='const'>Dna</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_dna_b'>dna_b</span><span class='period'>.</span><span class='id identifier rubyid_mob_id'>mob_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_dna_b'>dna_b</span><span class='period'>.</span><span class='id identifier rubyid_gene_id'>gene_id</span> <span class='op'>=</span> <span class='id identifier rubyid_gene_b'>gene_b</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_dna_b'>dna_b</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dna_b'>dna_b</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="random_mate_mob-class_method">
  
    + (<tt>Object</tt>) <strong>random_mate_mob</strong>(num, user_id = nil, specie_id = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This method calls mate_mob function after selected mating pair in this
function.</p>
</div>
  </div>


<p>Create new mob by mating.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>num</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Number of mobs to be created.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>HouddUser.id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>specie_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Specie.id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/mob_creator.rb', line 160</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_random_mate_mob'>random_mate_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_num'>num</span><span class='comma'>,</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>

  <span class='comment'># Validation
</span>  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_num'>num</span> <span class='op'>&lt;</span> <span class='int'>1</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='const'>HouddUser</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'>HouddUser</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_sexual_species'>sexual_species</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_num'>num</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_father'>father</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_find_all_by_houdd_user_id_and_specie_id_and_gender_sym'>find_all_by_houdd_user_id_and_specie_id_and_gender_sym</span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='comma'>,</span> <span class='const'>Params</span><span class='op'>::</span><span class='const'>GENDER_MALE</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
    <span class='id identifier rubyid_mother'>mother</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_find_all_by_houdd_user_id_and_specie_id_and_gender_sym'>find_all_by_houdd_user_id_and_specie_id_and_gender_sym</span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='comma'>,</span> <span class='const'>Params</span><span class='op'>::</span><span class='const'>GENDER_FEMALE</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_father'>father</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='kw'>or</span> <span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_mate_mob'>mate_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_father'>father</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="random_split_mob-class_method">
  
    + (<tt>Object</tt>) <strong>random_split_mob</strong>(num, user_id = nil, specie_id = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This method calls split_mob function after selected mob in this function.</p>
</div>
  </div>


<p>Create new mob by splitting.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>num</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Number of mobs to be created.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>HouddUser.id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>specie_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Specie.id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/mob_creator.rb', line 194</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_random_split_mob'>random_split_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_num'>num</span><span class='comma'>,</span> <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  
  <span class='comment'># Validation
</span>  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_num'>num</span> <span class='op'>&lt;</span> <span class='int'>1</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='const'>HouddUser</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'>HouddUser</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_asexual_species'>asexual_species</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_num'>num</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mother'>mother</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_find_all_by_houdd_user_id_and_specie_id'>find_all_by_houdd_user_id_and_specie_id</span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_split_mob'>split_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="seed_mobs-class_method">
  
    + (<tt>Object</tt>) <strong>seed_mobs</strong>(specie_id, num) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create seed mobs.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>specie_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Specie.id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>num</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Number of mobs to be created.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/mob_creator.rb', line 7</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_seed_mobs'>seed_mobs</span><span class='lparen'>(</span><span class='id identifier rubyid_specie_id'>specie_id</span><span class='comma'>,</span> <span class='id identifier rubyid_num'>num</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_num'>num</span> <span class='op'>&lt;</span> <span class='int'>1</span>

  <span class='id identifier rubyid_specie'>specie</span> <span class='op'>=</span> <span class='const'>Specie</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_specie_id'>specie_id</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_num'>num</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>

    <span class='comment'># Create mob.
</span>    <span class='id identifier rubyid_mob'>mob</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>

    <span class='comment'># Create genes and dnas.
</span>    <span class='id identifier rubyid_dna_quantity'>dna_quantity</span> <span class='op'>=</span> <span class='const'>Params</span><span class='op'>::</span><span class='const'>MOB_DNA_QUANTITY</span>
    <span class='id identifier rubyid_dna_quantity'>dna_quantity</span> <span class='op'>=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_asexual_flg'>asexual_flg</span>

    <span class='id identifier rubyid_dna_quantity'>dna_quantity</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_gene'>gene</span> <span class='op'>=</span> <span class='const'>Gene</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
      <span class='id identifier rubyid_gene'>gene</span><span class='period'>.</span><span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_gene'>gene</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span> <span class='op'>=</span> <span class='const'>Tools</span><span class='period'>.</span><span class='id identifier rubyid_random_boolean'>random_boolean</span>
      <span class='id identifier rubyid_gene'>gene</span> <span class='op'>=</span> <span class='id identifier rubyid_shake_gene'>shake_gene</span><span class='lparen'>(</span><span class='id identifier rubyid_gene'>gene</span><span class='comma'>,</span>  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_mutation_rate'>mutation_rate</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_gene'>gene</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
      <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_gene'>gene</span>

      <span class='id identifier rubyid_dna'>dna</span> <span class='op'>=</span> <span class='const'>Dna</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
      <span class='id identifier rubyid_dna'>dna</span><span class='period'>.</span><span class='id identifier rubyid_mob_id'>mob_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_dna'>dna</span><span class='period'>.</span><span class='id identifier rubyid_gene_id'>gene_id</span> <span class='op'>=</span> <span class='id identifier rubyid_gene'>gene</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
      <span class='id identifier rubyid_dna'>dna</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>

      <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dna'>dna</span>
    <span class='kw'>end</span>

    <span class='comment'># Create status modifying gene.
</span>    <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='const'>Gene</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_family'>family</span><span class='period'>.</span><span class='id identifier rubyid_asexual_flg'>asexual_flg</span>
      <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span>
      <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>
    <span class='kw'>elsif</span> <span class='kw'>not</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span> <span class='kw'>and</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span><span class='period'>.</span><span class='id identifier rubyid_dominance_flg'>dominance_flg</span>
      <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span> <span class='op'>+</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>
    <span class='kw'>end</span>

    <span class='comment'># Create starting status.
</span>    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_father_id'>father_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother_id'>mother_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_houdd_user_id'>houdd_user_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_squad_id'>squad_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_mob'>mob</span> <span class='op'>=</span> <span class='id identifier rubyid_new_mob'>new_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_mob'>mob</span><span class='comma'>,</span> <span class='id identifier rubyid_mod_gene'>mod_gene</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="specie_able_to_mate?-class_method">
  
    + (<tt>Boolean</tt>) <strong>specie_able_to_mate?</strong>(user_id, specie_id) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>“able to mate” means both father mob and mother mob are existing.</p>
</div>
  </div>


<p>Check the specie whether it is able to mate or not.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HouddUser.id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>specie_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Specie.id</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the size of the file</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/mob_creator.rb', line 144</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_specie_able_to_mate?'>specie_able_to_mate?</span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='kw'>or</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

  <span class='id identifier rubyid_father'>father</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_find_all_by_houdd_user_id_and_specie_id_and_gender_sym'>find_all_by_houdd_user_id_and_specie_id_and_gender_sym</span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='comma'>,</span> <span class='const'>Params</span><span class='op'>::</span><span class='const'>GENDER_MALE</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
  <span class='id identifier rubyid_mother'>mother</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_find_all_by_houdd_user_id_and_specie_id_and_gender_sym'>find_all_by_houdd_user_id_and_specie_id_and_gender_sym</span><span class='lparen'>(</span><span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_specie_id'>specie_id</span><span class='comma'>,</span> <span class='const'>Params</span><span class='op'>::</span><span class='const'>GENDER_FEMALE</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>

  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_father'>father</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='kw'>or</span> <span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="split_mob-class_method">
  
    + (<tt>Object</tt>) <strong>split_mob</strong>(mother_id) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This method is only for mobs of asexual reproduction.</p>
</div>
  </div>


<p>Create new mob by splitting.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>mother_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Mob.id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/mob_creator.rb', line 269</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_split_mob'>split_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_mother_id'>mother_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mob'>mob</span> <span class='op'>=</span> <span class='const'>Mob</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_father_id'>father_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother_id'>mother_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mother_id'>mother_id</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie_id'>specie_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_houdd_user_id'>houdd_user_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_houdd_user_id'>houdd_user_id</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span> <span class='op'>+</span> <span class='int'>1</span>

  <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_mother'>mother</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_gene'>gene</span>

  <span class='comment'># Effect of miss print
</span>  <span class='id identifier rubyid_mod_gene'>mod_gene</span> <span class='op'>=</span> <span class='id identifier rubyid_shake_gene'>shake_gene</span><span class='lparen'>(</span><span class='id identifier rubyid_mod_gene'>mod_gene</span><span class='comma'>,</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_specie'>specie</span><span class='period'>.</span><span class='id identifier rubyid_mutation_rate'>mutation_rate</span><span class='rparen'>)</span>

  <span class='comment'># Create starting status.
</span>  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_squad_id'>squad_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_mob'>mob</span> <span class='op'>=</span> <span class='id identifier rubyid_new_mob'>new_mob</span><span class='lparen'>(</span><span class='id identifier rubyid_mob'>mob</span><span class='comma'>,</span> <span class='id identifier rubyid_mod_gene'>mod_gene</span><span class='rparen'>)</span>

  <span class='comment'># Set DNA.
</span>  <span class='id identifier rubyid_dna'>dna</span> <span class='op'>=</span> <span class='const'>Dna</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_dna'>dna</span><span class='period'>.</span><span class='id identifier rubyid_mob_id'>mob_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_dna'>dna</span><span class='period'>.</span><span class='id identifier rubyid_gene_id'>gene_id</span> <span class='op'>=</span> <span class='id identifier rubyid_mod_gene'>mod_gene</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_dna'>dna</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
  <span class='id identifier rubyid_mob'>mob</span><span class='period'>.</span><span class='id identifier rubyid_dnas'>dnas</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_dna'>dna</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sun Mar 30 18:32:14 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.6.2 (ruby-1.9.3).
</div>

  </body>
</html>